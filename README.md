O desenvolvimento da miniestufa inteligente iniciou-se com a montagem do circuito, utilizando o ESP32 como microcontrolador principal. A alimentação do sistema é realizada via micro-USB fêmea, conectada a uma fonte de 5V. Logo após a entrada, foi adicionado um fusível de proteção para evitar sobrecorrentes, seguido de um capacitor eletrolítico de 1000 µF entre VBUS (5V) e GND, atuando como reserva de energia e prevenindo quedas de tensão durante o acionamento da bomba d’água.

Próximo à ponte H TB6612FNG, responsável pelo controle da bomba submersível JT100 (5V), foram instalados um capacitor eletrolítico de 100 µF, para estabilização em baixa frequência, e um capacitor cerâmico de 0,1 µF (100 nF), para redução de ruídos de alta frequência. Essa combinação garante maior estabilidade na tensão da ponte H, especialmente durante o chaveamento da bomba. Os pinos PWMA e STBY da ponte H foram ligados diretamente ao barramento de 3,3V, permitindo operação contínua em velocidade máxima, enquanto o controle da bomba é realizado pelos pinos AIN1 e AIN2, configurados pela ESP32. A leitura do sensor de umidade é calibrada via função map() no código, convertendo os valores de tensão em porcentagem de umidade (0–100%).

A comunicação e integração foram implementadas utilizando o protocolo MQTT, com a ESP32 conectada à rede Wi-Fi local por meio da biblioteca WiFi.h e um broker Mosquitto rodando no computador. A biblioteca PubSubClient.h é utilizada para publicar dados, como a umidade do solo e o estado da bomba, em tópicos MQTT, permitindo acompanhar os registros de funcionamento em tempo real via terminal ou comandos mosquitto_sub.

Foram realizados testes individuais dos sensores, coletando dados em solo seco e molhado, e implementada a lógica para acionamento automático da bomba quando a umidade do solo estivesse abaixo do limite definido. Também foram verificados a publicação e assinatura de tópicos MQTT, como miniEstufa/logs, integrando a leitura dos sensores com o envio de dados via MQTT.

Além disso, o monitoramento via porta serial da IDE Arduino permite visualizar logs periódicos com informações como umidade do solo medida, estado da bomba e status de conexão com Wi-Fi e MQTT, garantindo acompanhamento completo do funcionamento da miniestufa.
